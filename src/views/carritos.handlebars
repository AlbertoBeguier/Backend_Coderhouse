<div class="container">
  <h1 class="text-center">Carrito de Compras</h1>

  {{#if carritos.length}}
    {{#each carritos}}
      <div class="carrito">
        <ul>
          {{#each products}}
            <li>
              {{product.title}}
              - Cantidad: {{quantity}}
              - Precio: ${{product.price}}
              <button
                class="btn btn-danger btn-sm delete-product-btn"
                data-product-id="{{product._id}}"
                data-cart-id="{{../_id}}"
              >
                Eliminar
              </button>
              <br />Subtotal: ${{multiply product.price quantity}}
            </li>
          {{/each}}
        </ul>

        <!-- Total General del Carrito -->
        <h3>Total del Carrito: ${{calculateTotal products}}</h3>
      </div>
      <hr />
    {{/each}}
    <button id="empty-cart-btn" class="btn btn-warning" data-cart-id="{{carritos.[0]._id}}">Vaciar Carrito</button>
  <button id="finalize-purchase-btn" class="btn btn-success" data-cart-id="{{carritos.[0]._id}}">
      Finalizar Compra
    </button>
  
  {{else}}
    <p>No se encontraron productos en tu carrito.</p>
  {{/if}}
</div>

<script src="/botonEliminarProductoCarrito.js"></script>
<script src="/botonFinalizarCompra.js"></script>

